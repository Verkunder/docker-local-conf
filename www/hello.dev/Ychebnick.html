<HTML>
<body>
<h1><a name=g1>Ваш инструментарий РНР и MySQL</H1>
<br>Вы не только помогли Элмеру</br>
<br>усовершенствовать его веб-приложение,</br>
<br>но и приобрели при чтении этой главы</br> 
<br>определенные ценные навыки</br> 
<br>по использованию PHP и MySQL.</br>
<br>Например...</br>
<br><p align=center><img src=images/picture.jpg></br></p>
<img src=images/Снимок2.jpg>
<p align=right> вы здесь 193 </p>
<p align=center><H1><a name=g2> 4 Реальные и практические приложения</H1></p>
<p align=center><H1>  Ваше веб приложение </H1></p>
<img src=images/pr.JPG>
<br>Инorда надо реалыю смотреть на вещи и менять свои планы.</br>
Или планировать более внимательно с самого начала. После загрузки приложения
на ве6-сервер вы, возможно, обнаружите, что спланировали его недостаточно хорошо.
Некоторые решения, которые, как вы предполагали, будут работать, в реальной жизни
оказались не слишком удачными. В этой главе мы рассмотрим некоторые проблемы
реальной жuзнu, которые могут возникнуть, после того как <b>ваше приложение выйдет из режима тестирования и переместится в Интернет.</b> По пути мы познакомим вас
с примерами более важного кода РНР и SQL.
<p align=right><b>это новая глава 195 </p> 
<br><b>Элмеру нужно более качественное</b> приложение для ведения листа рассылки</br>
<br><big><b>У Элмера появились раздражительные покупатели</big></b></br>
Лист рассылки Эл мера стремительно разросся, но его лектронные письма в ряде
случаев повлекли за собой некоторые жалобы. Они носили различный характер ,
но, похоже, все сводились к тому, что покупатели получали пустые электронные
письма или сразу по нескольку писем, ни одно из которых не содержало ничего
полезного. Элмеру необходимо выяснить причину этого явления и исправить
положение. От этого зависит его бизнес.
<img src=images/Снимок4.jpg>
<p align=left> 196 <b>глава 4</b> </p>
<b><big><br> Станьте администратором</b></big></br> <br><b><big> Листа расслыки Элмера</br></b></big>
<br><b>Ваша задача-сыграть роль Элмера</b></br>
<br><b> и выяснить, как отправляются</b></br>
<br><b>пустые электронные письма.</b></br>
<br><b>он подозревает, что все это связанно</b></br>
<br><b>с формой sandemail.html</b></br>
<p align=center><img src=images/Снимок5.jpg></p>
<img src=images/Снимок6.jpg>
<p align=right><b>ВЫ ЗДЕСЬ</b> 197 </p>
<b><big><br> Станьте администратором</b></big></br> <br><b><big> Листа расслыки Элмера</br></b></big>
<br><b>Ваша задача-сыграть роль Элмера</b></br>
<br><b> и выяснить, как отправляются</b></br>
<br><b>пустые электронные письма.</b></br>
<br><b>он подозревает, что все это связанно</b></br>
<br><b>с формой sandemail.html</b></br>
<p align=center><img src=images/Снимок5.jpg></p>
<img src=images/Снимок7.jpg>
<p align=left> 198 <b>глава 4</b> </p>
<p align=right><b> реальные и практические приложения </p></b>
<br>Итак, основная проблема здесь заключается в "человеческом
факторе". Элмер по оплошности нажал кнопку "Отправить"
до того, как ввел содержание электронного письма, и пустое письмо
отправилось всем покупателям, включенным в лист рассылки.
Достаточно не6езопасно считать, что веб-форма всегда будет
использоваться строго так, как это предусмотрено ее создателем.
Вот почему это исключительно ваша, бдительный создатель
РНР-сценария, задача - протестировать и устранить проблемы
подобного рода, пытаясь предугадать все неправильные действия
любого пользователя, имеющего дело с вашей формой.</br>
<br>Давайте взглянем на код текущей версии нашего сценария
sendemail. php, чтобы понять, как у Элмера получается пустое
электронное письмо.</br>
<p align=right><img src=images/Снимок8.jpg></p>
<p align=center><img src=images/Снимок9.jpg></p>
<big><b><p align=right><br>Напишите, какие, по вашему мнению, нужно внести</br>
<br>изменения в код сценария sendemail.php,</br>
<br>чтобы решить проблему пустых электронных писем:</br></big></b></p>
<p align=right><b>ВЫ ЗДЕСЬ</b> 199 </p>
<b>sendemail.php</b> требует контроля вводимых данных
<<br><H1><a name=g3> ТРЕБУЙТЕ ДОСТОВЕРНЫХ ДАННЫХ, ВВОДИМЫХ В ФОРМУ </H1></br> 
<tr><td>
<p align=right><img src=images/Снимок10.jpg></p>
<p align=left><br>Форма Элмера "Отправка электронной почты" необходим <b> контроль достоверности </b> вводимых</br>
<br>в форму данных. В результате такого контроля должно быть установленно, что данные в форме </br>
<br>отвечают требованиям, предъявленым к ним, и могут быть использованы для дальнейших</br>
<br>операций. Элмер уже использует контроль достоверности, хотя прямо так его и не называет.</br>
<br>Каждый раз, когда он получает заказ на отправку товаров, связанных с жизнью Элвиса</br>
<br>он не выполняет заказ немедленно...Сначала он проверяет достоверность каждого заказа!</br></p>
<br>
<br>В каждом случае вначале он проверяет, <b> действительна</b> ли банковская карточка покупателя,</br>
<br>оформившего заказ. Если с карточкой все в порядке, он оформляет заказ и готовит его </br>
<br>к отправке. После этого он должен обязательно проверить, все ли в порядке с почтовым адресом </br>
<br>покупателя. При отсутствии каких-либо проблем с адресом Элмер отправляет заказ. Успешное </br>
<br>выполнение заказа для магазина Элмера тесно связано с контролем достоверности всех данных, </br>
<p align=left><img src=images/Снимок11.jpg></p>
<br>Для того чтобы решить проблему Элмера с электронными письмами, нам необходимо</br>
<br>проводить контроль достоверности данных, передаваемый сценарию sendemail.php.</br>
<br>Это означает, что все данные, отправленные с веб-формой на сервер сценарию</br>
<br>sendemail.php, должны быть проверены в нем на достоверность и полноту, прежде</br>
<br>чем будут использованы. Мы можем добавить в сценарий sendemail.php код,</br>
<br>который проведет такую проверку. И только в том случае, если результаты проверки</br>
<br>окажутся положительными, сценарий отправит электронные письма.</br>
<td><p align=center><img src=images/Снимок12.jpg></p>
<p align=left><img src=images/Снимок13.jpg></p>
<p align=left> 200 <b>глава 4</b> </p>
<p align=right><b>реальные и практические приложения</b></p>
<H1><br><a name=g4>Логика в проверке на достоверность данных формы</br>
<br>"Отправка электронной почты"</br></H1>
Элмеру необходимо <b>проконтролировать достоверность</b> данных, полученных от формы sendemail . h tml,
прежде чем отправить любое электронное письмо. Фактически отправка электронных писем должна
полностью полагаться на проверку достоверности данных. Чего мы в действительности хотим от РНР, так
это принятия решения, основанного на достоверности данных, полученных сценарием sendemail . php.
Нам необходим код с таким алгоритмом: "<b>Если данные достоверны</b>, отправляйте электронные письма" .
<p align=center><img src=images/Снимок14.jpg>
<br><big><b>В:</big></b> Я слышал о том, что существуют способы проверки данных на достоверность на клиенте,а не на сервере.
 Как это происходит?</br>
<br><big><b>О:</b></big> Клиентской программой в данном случае является браузер.
Поэтому проверкой данных на достоверность на клиентской стороне будет любая проверка, осуществляемая до отправки данных на сервер PHP-сценарию.
Такой язык, как JavaScript, может проводить проверку данных на достоверность на клиентской стороне. Если вы заинтересованы в более глубоком изучении этого
вопроса, обратитесь к книге Head First JavaScript. </br>
<br><b><big> В: </b></big> Зачем вообще осуществялть проверку данных на достоверность на сервере вместо того, что бы делать все на клиенте?</br>
<br><b><big> О:</b></big> При проверке данных на достоверность на клиентской стороне мы решаем только часть проблемы.
В принципе, Элмер может открыть sendmail.php непосредственно в браузере и отправить пустые электронные письма. Но когда вы осуществляете проверку данных на достоверность на сервере,
это решает обе проблемы. Отсутствие данных будет определено как в случае передачи их с формы, так и в случае загрузки непосредственно PHP-сценария. Нельзя сказать, что осуществлять 
проверку даннных на достоверность на клиентской стороне неправильно. Фактически это очень хорошая практика. Но нужно всегда помнить, что сервер-это последняя линия обороны в перехвате
недостоверных данных, по этому проверка данных на достоверность на серверной стороне не должна игнорироваться.</br>
<p align=right><b>вы здесь</b> 201  </p>
<b> управляющая конструкция if(если).</b>
<br><H1><a name=g5> Ваш код может принимать решения,
<br>используя управляющую конструкцию if</H1>
Управляющая конструкция РНР if (если) позволяет вашему коду принимать решение <b> на основании проверки истинности некоторых выражений</b>.
Рассмотрим опять заказы Элмера. Прежде чем
оформить заказ, Элмер планирует получить деньги в размере стоимости этого заказа, что означает,
что он должен снять необходимую сумму с банковской карточки покупателя. Если покупатель даст
Элмеру неправильный номер карточки, он не сможет оформить заказ. Поэтому в реальной жизни Элмер
проводит проверку каждого заказа по такому сценарию:
<br> 
<br><b>Если оплата по банковской карточке покупателя проходит без проблем, он оформляет заказ.</b>
<br>
Мы можем перевести этот сценарий в РНР-код, используя управляющую конструкцию if , которая служит
для принятия решений подобного типа.
<br>
<p align=center><img src=images/Снимок15.jpg>
<p align=left> 202 <b>глава 4</b> </p>
<p align=right><b> Реальные и практические приложения </b></p>
<H1><a name=g6> Проверка на достоверность </h1>
Центральной частью управляющей конструкции if является ее условное выражение,
которое всегда интерпретируется только как true или false. Условное выражение
может быть переменной, вызовом функции или результатом сравнения какого-либо
объекта с другим объектом. Элмер использует вызов функции, которая производит
проверку достоверности номера банковской карточки и возвращает либо true,
либо false в зависимости от результатов этой проверки. 
<p align=center><img src=images/Снимок16.jpg></p>
<p align=center><img src=images/Снимок17.jpg></p>
<p align=right><b>вы здесь</b> 203  </p>
<p align=center><img src=images/Снимок18.jpg></p>
<p align=center><img src=images/Снимок19.jpg></p>
<p align=left> 204 <b>глава 4</b> </p>
<H1> Станьте условным выражением в управляющей конструкции IF </H1>
<p align=center><b><big> Ваша задача-играть роль условного выражения <br>
в управляющей конструкции If и решать истина <br>
вы или ложь, в каждом из случаевЮ когда вам будут <br>
предлагаться для проверки следующие переменные</p>
<p align=center><img src=images/Снимок20.jpg></p>
<p align=right><b>вы здесь</b> 205  </p>
<H1> Станьте условным выражением в управляющей конструкции IF </H1>
<p align=center><b><big> Ваша задача-играть роль условного выражения <br>
в управляющей конструкции If и решать истина <br>
вы или ложь, в каждом из случаевЮ когда вам будут <br>
предлагаться для проверки следующие переменные</p>
<p align=center><img src=images/Снимок21.jpg></p>
<H1><a name=g7> Логика в проверке на достоверность данных формы <br>
"Отправка электронной почты" </H1>
Элмеру необходимо проконтролировать достоверность данных, полученных от формы sendemail.htm1.
прежде чем отправить любое электронное письмо. Фактически отправка электронных писем должна
полностью полагаться на проверку достоверности данных. Чего мы в действительности хотим от РНР,
так это принятия решения, основанного на достоверности данных, полученных сценарием sendemai.php.
Нам необходим код с таким алгоритмом: "Если данные достоверны, отправляйте электронные письма".
<br>
<br>
Но вначале мы должны извлечь данные из формы и присвоить их значения паре переменных.
<p align=center><img src=images/Снимок22.jpg></p>
<p align=right><b>вы здесь</b> 207  </p>
<p align=center><img src=images/Снимок23.jpg></p>
<H1><a name=g8> PHP-функции для проверки переменных </H1>
Использование оператора == для проверки пустых строк работает, но существует более
удобный метод, основанный на использовании встроенных рнр-функций. Функция
isset () проверяет, существует ли переменная, то есть присвоено ли ей какое-либо
значение. Функция empty () идет на шаг дальше и определяет, присвоено ли переменной пустое значение, что определяется в PHP как 0(ноль), пустая строка(' ' или " "),
или значение False или Null
<br>
Давайте постмотрим, как эти функции работают: 
<p align=center><img src=images/Снимок24.jpg></p>


 








 




 
 



